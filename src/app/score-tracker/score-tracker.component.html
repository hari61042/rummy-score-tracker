<div class="main-container">
    <div class="header" *ngIf="gameStarted" style="text-align: right; margin-bottom: 10px;">
      <button pButton label="Reset Game" icon="pi pi-refresh" class="p-button-danger" (click)="resetGame()"></button>
    </div>
  
    <!-- Add Player Form -->
    <div class="add-player-form" *ngIf="!gameStarted">
      <div class="card">
        <h3>Add Players</h3>
        <div class="input-button-group">
          <input 
            [(ngModel)]="newPlayerName" 
            pInputText 
            placeholder="Enter Player Name" 
            (keyup.enter)="addPlayer()" 
            #playerNameInput 
            (input)="toUpperCase($event)"
            [ngModelOptions]="{standalone: true}" 
          />
          <div class="button-group">
            <button pButton label="Add Player" icon="pi pi-plus" (click)="addPlayer()"></button>
            <button pButton label="Start Game" icon="pi pi-play" (click)="startGame()" [disabled]="players.length <= 1"></button>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Div 1: Player Scores and Stats -->
    <div class="player-info">
      <div class="player-scores" *ngIf="players.length > 0">
        <h3>Player Total Scores</h3>
        <div class="scores-row">
          <div *ngFor="let player of players" class="score-item">
            <h4>{{ player.name }}</h4>
            <p>Total: <span class="score-total">{{ player.totalScore }}</span></p>
          </div>
        </div>
      </div>
  
      <div class="score-stats" *ngIf="players.length > 0">
        <h3>Player Statistics</h3>
        <p><strong>Highest Score:</strong> {{ highestScorePlayer.name || 'N/A' }} ({{ highestScorePlayer.totalScore || 0 }})</p>
        <p><strong>Lowest Score:</strong> {{ lowestScorePlayer.name || 'N/A' }} ({{ lowestScorePlayer.totalScore || 0 }})</p>
      </div>
    </div>
  
    <!-- Div 2: Enter Scores Table -->
    <div class="enter-scores" *ngIf="gameStarted">
      <div class="card">
        <h3>Enter Scores</h3>
        <p-table [value]="rounds" [tableStyle]="{ 'width': '100%' }">
          <ng-template pTemplate="header">
            <tr>
              <th>Round</th>
              <th *ngFor="let player of players">{{ player.name }}</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-roundIndex="rowIndex">
            <tr>
              <td>{{ roundIndex + 1 }}</td>
              <td *ngFor="let player of players; let i = index">
                <input
                  type="number"
                  pInputText
                  [(ngModel)]="rounds[roundIndex][i]"
                  (blur)="updateScores(roundIndex, i)"
                  placeholder="Score"
                  [value]="rounds[roundIndex][i] ? rounds[roundIndex][i] : ''"
                />
              </td>
            </tr>
          </ng-template>
        </p-table>
        <button style="margin-bottom: 4px;" pButton label="Add Round" icon="pi pi-plus" (click)="addRound()" class="p-button-primary"></button>
      </div>
    </div>
  </div>
  